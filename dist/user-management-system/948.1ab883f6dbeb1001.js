"use strict";(self.webpackChunkuser_management_system=self.webpackChunkuser_management_system||[]).push([[948],{8948:(H,f,d)=>{d.r(f),d.d(f,{AccountsModule:()=>z});var o=d(8326),c=d(177),l=d(9979),m=d(4046),t=d(4438),u=d(8482);const h=(e,r)=>({"badge-success":e,"badge-danger":r}),E=e=>["/admin/accounts/edit",e];function F(e,r){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",5),t.EFF(9),t.k0s()(),t.j41(10,"td",6)(11,"button",7),t.EFF(12,"Edit"),t.k0s()()()),2&e){const s=r.$implicit;t.R7$(2),t.Lme("",s.firstName," ",s.lastName,""),t.R7$(2),t.JRh(s.email),t.R7$(2),t.JRh(s.role),t.R7$(2),t.Y8G("ngClass",t.l_i(7,h,"active"===s.status,"inactive"===s.status)),t.R7$(),t.SpI(" ",s.status.charAt(0).toUpperCase()+s.status.slice(1).toLowerCase()," "),t.R7$(2),t.Y8G("routerLink",t.eq3(10,E,s.id))}}function g(e,r){1&e&&(t.j41(0,"tr")(1,"td",8),t.nrm(2,"span",9),t.k0s()())}let _=(()=>{class e{constructor(s){this.accountService=s}ngOnInit(){this.accountService.getAll().pipe((0,m.$)()).subscribe(s=>this.accounts=s)}deleteAccount(s){this.accounts.find(i=>i.id===s).isDeleting=!0,this.accountService.delete(s).pipe((0,m.$)()).subscribe(()=>{this.accounts=this.accounts.filter(i=>i.id!==s)})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(u.D))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:20,vars:2,consts:[["routerLink","/admin/accounts/add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"badge",3,"ngClass"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(n,i){1&n&&(t.j41(0,"h1"),t.EFF(1,"Accounts"),t.k0s(),t.j41(2,"p"),t.EFF(3,"All accounts from secure (admin only) API endpoint:"),t.k0s(),t.j41(4,"a",0),t.EFF(5,"Create Account"),t.k0s(),t.j41(6,"table",1)(7,"thead")(8,"tr")(9,"th",2),t.EFF(10,"Name"),t.k0s(),t.j41(11,"th",2),t.EFF(12,"Email"),t.k0s(),t.j41(13,"th",2),t.EFF(14,"Role"),t.k0s(),t.j41(15,"th",2),t.EFF(16,"Status"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,F,13,12,"tr",3)(19,g,3,0,"tr",4),t.k0s()()),2&n&&(t.R7$(18),t.Y8G("ngForOf",i.accounts),t.R7$(),t.Y8G("ngIf",!i.accounts))},dependencies:[c.YU,c.Sq,c.bT,l.Wk],encapsulation:2})}}return e})();var k=d(2571);const a=e=>({"is-invalid":e});function b(e,r){1&e&&(t.j41(0,"h1"),t.EFF(1,"Create Account"),t.k0s())}function C(e,r){1&e&&(t.j41(0,"h1"),t.EFF(1,"Edit Account"),t.k0s())}function j(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Title is required."),t.k0s())}function A(e,r){if(1&e&&(t.j41(0,"div",26),t.DNE(1,j,2,0,"div",0),t.k0s()),2&e){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.f.title.errors.required)}}function G(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"First Name is required."),t.k0s())}function R(e,r){if(1&e&&(t.j41(0,"div",26),t.DNE(1,G,2,0,"div",0),t.k0s()),2&e){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.f.firstName.errors.required)}}function $(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Last Name is required."),t.k0s())}function N(e,r){if(1&e&&(t.j41(0,"div",26),t.DNE(1,$,2,0,"div",0),t.k0s()),2&e){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.f.lastName.errors.required)}}function I(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Email is required"),t.k0s())}function Y(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Email must be a valid email address"),t.k0s())}function T(e,r){if(1&e&&(t.j41(0,"div",26),t.DNE(1,I,2,0,"div",0)(2,Y,2,0,"div",0),t.k0s()),2&e){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.f.email.errors.required),t.R7$(),t.Y8G("ngIf",s.f.email.errors.email)}}function w(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Role is required"),t.k0s())}function q(e,r){if(1&e&&(t.j41(0,"div",26),t.DNE(1,w,2,0,"div",0),t.k0s()),2&e){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.f.role.errors.required)}}function D(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Status is required"),t.k0s())}function S(e,r){if(1&e&&(t.j41(0,"div",26),t.DNE(1,D,2,0,"div",0),t.k0s()),2&e){const s=t.XpG(2);t.R7$(),t.Y8G("ngIf",s.f.status.errors.required)}}function y(e,r){if(1&e&&(t.j41(0,"div",22)(1,"label",27),t.EFF(2,"Status"),t.k0s(),t.j41(3,"select",28)(4,"option",29),t.EFF(5,"Active"),t.k0s(),t.j41(6,"option",30),t.EFF(7,"Inactive"),t.k0s()(),t.DNE(8,S,2,1,"div",10),t.k0s()),2&e){const s=t.XpG();t.R7$(3),t.Y8G("ngClass",t.eq3(2,a,s.submitted&&s.f.status.errors)),t.R7$(5),t.Y8G("ngIf",s.submitted&&s.f.status.errors)}}function M(e,r){1&e&&(t.j41(0,"div")(1,"h3",31),t.EFF(2,"Change Password"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Leave blank to keep the same password"),t.k0s()())}function X(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Password is required"),t.k0s())}function P(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Password must be at least 6 characters"),t.k0s())}function U(e,r){if(1&e&&(t.j41(0,"div",26),t.DNE(1,X,2,0,"div",0)(2,P,2,0,"div",0),t.k0s()),2&e){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.f.password.errors.required),t.R7$(),t.Y8G("ngIf",s.f.password.errors.minlength)}}function L(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Confirm Password is required"),t.k0s())}function B(e,r){1&e&&(t.j41(0,"div"),t.EFF(1,"Passwords must match"),t.k0s())}function x(e,r){if(1&e&&(t.j41(0,"div",26),t.DNE(1,L,2,0,"div",0)(2,B,2,0,"div",0),t.k0s()),2&e){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.f.confirmPassword.errors.required),t.R7$(),t.Y8G("ngIf",s.f.confirmPassword.errors.mustMatch)}}function O(e,r){1&e&&t.nrm(0,"span",32)}let p=(()=>{class e{constructor(s,n,i,v,W){this.formBuilder=s,this.route=n,this.router=i,this.accountService=v,this.alertService=W,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({title:["",o.k0.required],firstName:["",o.k0.required],lastName:["",o.k0.required],email:["",[o.k0.required,o.k0.email]],role:["",o.k0.required],status:["inactive",o.k0.required],password:["",[o.k0.minLength(6),this.isAddMode?o.k0.required:o.k0.nullValidator]],confirmPassword:[""]},{validator:(0,k.pk)("password","confirmPassword")}),this.isAddMode||this.accountService.getById(this.id).pipe((0,m.$)()).subscribe(s=>this.form.patchValue(s))}get f(){return this.form.controls}onSubmit(){if(this.submitted=!0,this.alertService.clear(),this.form.invalid)return this.alertService.error("Please correct the errors in the form."),void Object.keys(this.form.controls).forEach(s=>{const n=this.form.get(s)?.errors;null!=n&&console.log("Validation failed for:",s,n)});this.loading=!0,this.isAddMode?this.createAccount():this.updateAccount()}createAccount(){this.accountService.create(this.form.value).pipe((0,m.$)()).subscribe({next:()=>{this.alertService.success("Account created successfully.",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:s=>{this.alertService.error(s),this.loading=!1}})}updateAccount(){this.accountService.update(this.id,this.form.value).pipe((0,m.$)()).subscribe({next:s=>{console.log("Update successful:",s),this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:s=>{console.error("Update error:",s),this.alertService.error(s),this.loading=!1}})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(o.ze),t.rXU(l.nX),t.rXU(l.Ix),t.rXU(u.D),t.rXU(u.u))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:62,vars:35,consts:[[4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group","col-7"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["formControlName","role",1,"form-control",3,"ngClass"],["value","User"],["value","Admin"],["class","form-group",4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/admin/accounts",1,"btn","btn-link"],[1,"invalid-feedback"],["for","status"],["formControlName","status",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],[1,"pt-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(n,i){1&n&&(t.DNE(0,b,2,0,"h1",0)(1,C,2,0,"h1",0),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(3,"div",2)(4,"div",3)(5,"label"),t.EFF(6,"Title"),t.k0s(),t.j41(7,"select",4),t.nrm(8,"option",5),t.j41(9,"option",6),t.EFF(10,"Mr"),t.k0s(),t.j41(11,"option",7),t.EFF(12,"Mrs"),t.k0s(),t.j41(13,"option",8),t.EFF(14,"Miss"),t.k0s(),t.j41(15,"option",9),t.EFF(16,"Ms"),t.k0s()(),t.DNE(17,A,2,1,"div",10),t.k0s(),t.j41(18,"div",11)(19,"label"),t.EFF(20,"First Name"),t.k0s(),t.nrm(21,"input",12),t.DNE(22,R,2,1,"div",10),t.k0s(),t.j41(23,"div",11)(24,"label"),t.EFF(25,"Last Name"),t.k0s(),t.nrm(26,"input",13),t.DNE(27,N,2,1,"div",10),t.k0s()(),t.j41(28,"div",2)(29,"div",14)(30,"label"),t.EFF(31,"Email"),t.k0s(),t.nrm(32,"input",15),t.DNE(33,T,3,2,"div",10),t.k0s(),t.j41(34,"div",3)(35,"label"),t.EFF(36,"Role"),t.k0s(),t.j41(37,"select",16)(38,"option",17),t.EFF(39,"User"),t.k0s(),t.j41(40,"option",18),t.EFF(41,"Admin"),t.k0s()(),t.DNE(42,q,2,1,"div",10),t.k0s(),t.DNE(43,y,9,4,"div",19),t.k0s(),t.DNE(44,M,5,0,"div",0),t.j41(45,"div",2)(46,"div",3)(47,"label"),t.EFF(48,"Password"),t.k0s(),t.nrm(49,"input",20),t.DNE(50,U,3,2,"div",10),t.k0s(),t.j41(51,"div",3)(52,"label"),t.EFF(53,"Confirm Password"),t.k0s(),t.nrm(54,"input",21),t.DNE(55,x,3,2,"div",10),t.k0s()(),t.j41(56,"div",22)(57,"button",23),t.DNE(58,O,1,0,"span",24),t.EFF(59," Save "),t.k0s(),t.j41(60,"a",25),t.EFF(61,"Cancel"),t.k0s()()()),2&n&&(t.Y8G("ngIf",i.isAddMode),t.R7$(),t.Y8G("ngIf",!i.isAddMode),t.R7$(),t.Y8G("formGroup",i.form),t.R7$(5),t.Y8G("ngClass",t.eq3(21,a,i.submitted&&i.f.title.errors)),t.R7$(10),t.Y8G("ngIf",i.submitted&&i.f.title.errors),t.R7$(4),t.Y8G("ngClass",t.eq3(23,a,i.submitted&&i.f.firstName.errors)),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.firstName.errors),t.R7$(4),t.Y8G("ngClass",t.eq3(25,a,i.submitted&&i.f.lastName.errors)),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.lastName.errors),t.R7$(5),t.Y8G("ngClass",t.eq3(27,a,i.submitted&&i.f.email.errors)),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.email.errors),t.R7$(4),t.Y8G("ngClass",t.eq3(29,a,i.submitted&&i.f.role.errors)),t.R7$(5),t.Y8G("ngIf",i.submitted&&i.f.role.errors),t.R7$(),t.Y8G("ngIf",!i.isAddMode),t.R7$(),t.Y8G("ngIf",!i.isAddMode),t.R7$(5),t.Y8G("ngClass",t.eq3(31,a,i.submitted&&i.f.password.errors)),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.password.errors),t.R7$(4),t.Y8G("ngClass",t.eq3(33,a,i.submitted&&i.f.confirmPassword.errors)),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.confirmPassword.errors),t.R7$(2),t.Y8G("disabled",i.loading),t.R7$(),t.Y8G("ngIf",i.loading))},dependencies:[c.YU,c.bT,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.j4,o.JD,l.Wk],encapsulation:2})}}return e})();const V=[{path:"",component:_},{path:"add",component:p},{path:"edit/:id",component:p}];let J=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[l.iI.forChild(V),l.iI]})}}return e})(),z=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[c.MD,o.X1,J]})}}return e})()}}]);